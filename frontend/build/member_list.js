(()=>{"use strict";var e={5338:(e,t,a)=>{var r=a(5795);t.H=r.createRoot,r.hydrateRoot},5795:e=>{e.exports=window.ReactDOM}},t={};function a(r){var l=t[r];if(void 0!==l)return l.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=window.React,t=window.wp.i18n;var r=a(5338);const l=window.wp.url,s=window.wp.components,n=window.wp.apiFetch;var m=a.n(n);const i="/wicket_member/v1",c=document.getElementById("member_list");c&&(0,r.H)(c).render((0,e.createElement)((({memberType:a,editMemberUrl:r})=>{const[n,c]=(0,e.useState)(!0),[o,u]=(0,e.useState)([]),[p,d]=(0,e.useState)(0),[_,h]=(0,e.useState)(0),[b,E]=(0,e.useState)(null),[g,w]=(0,e.useState)(null),[v,f]=(0,e.useState)({type:a,page:1,posts_per_page:10,status:"",order_col:"start_date",order_dir:"ASC",search:""}),[N,k]=(0,e.useState)(v);console.log(v);const y=e=>{c(!0),((e=null)=>{if(null!==e)return m()({path:(0,l.addQueryArgs)(`${i}/memberships`,e)})})(e).then((t=>{console.log(t),u(t.results),d(t.count),h(Math.ceil(t.count/e.posts_per_page)),c(!1);const a=[...new Set(t.results.flatMap((e=>(e.user.all_membership_tiers||[{uuid:e.meta.membership_tier_uuid}]).map((e=>e.uuid)))))];null===b&&S(a)})).catch((e=>{console.error(e)}))},S=e=>{0!==e.length&&((e=[])=>{if(0!==e.length)return m()({path:(0,l.addQueryArgs)(`${i}/membership_tier_info`,{filter:{tier_uuid:e}})})})(e).then((e=>{E(e)})).catch((e=>{console.log("Tiers Info Error:"),console.log(e)}))},x=e=>null===b?null:b.hasOwnProperty("tier_data")&&b.tier_data.hasOwnProperty(e)?b.tier_data[e]:null;return(0,e.useEffect)((()=>{((e=null)=>{if(null!==e)return m()({path:(0,l.addQueryArgs)(`${i}/membership_filters`,{type:e})})})(a).then((e=>{w(e)})).catch((e=>{console.error(e)})),y(v)}),[]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"wrap"},(0,e.createElement)("h1",{className:"wp-heading-inline"},"individual"===a?(0,t.__)("Individual Members","wicket-memberships"):(0,t.__)("Organization Members","wicket-memberships")),(0,e.createElement)("hr",{className:"wp-header-end"}),(0,e.createElement)("form",{onSubmit:e=>{e.preventDefault();const t={...v,search:N.search,page:1};f(t),y(t)}},(0,e.createElement)("p",{className:"search-box"},(0,e.createElement)("label",{className:"screen-reader-text",htmlFor:"post-search-input"},(0,t.__)("Search Member","wicket-memberships")),(0,e.createElement)("input",{type:"search",id:"post-search-input",value:N.search,onChange:e=>k({...N,search:e.target.value})}),(0,e.createElement)("input",{type:"submit",className:"button",value:(0,t.__)("Search Member","wicket-memberships")}))),(0,e.createElement)("div",{className:"tablenav top"},(0,e.createElement)("form",{onSubmit:e=>{e.preventDefault();const t={...v,filter:{membership_status:N.filter.membership_status,membership_tier:N.filter.membership_tier}};""===t.filter.membership_status&&delete t.filter.membership_status,""===t.filter.membership_tier&&delete t.filter.membership_tier,f(t),y(t)}},(0,e.createElement)("div",{className:"alignleft actions"},(0,e.createElement)("select",{name:"filter_status",id:"filter_status",onChange:e=>{k({...N,filter:{...N.filter,membership_status:e.target.value}})}},(0,e.createElement)("option",{value:""},(0,t.__)("Status","wicket-memberships")),null!==g&&g.membership_status.map(((t,a)=>(0,e.createElement)("option",{key:a,value:t.name},t.value)))),(0,e.createElement)("select",{name:"filter_tier",id:"filter_tier",onChange:e=>{k({...N,filter:{...N.filter,membership_tier:e.target.value}})}},(0,e.createElement)("option",{value:""},(0,t.__)("All Tiers","wicket-memberships")),null!==g&&g.tiers.map(((t,a)=>null!==x(t.value)&&(0,e.createElement)("option",{key:a,value:t.value},x(t.value).name)))),(0,e.createElement)("input",{type:"submit",id:"post-query-submit",className:"button",value:(0,t.__)("Filter","wicket-memberships")})))),(0,e.createElement)("table",{className:"wp-list-table widefat fixed striped table-view-list posts"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,"organization"===a&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("th",{scope:"col",className:"manage-column"},(0,t.__)("Organization Name","wicket-memberships")),(0,e.createElement)("th",{scope:"col",className:"manage-column"},(0,t.__)("Location","wicket-memberships"))),"individual"===a&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("th",{scope:"col",className:"manage-column column-author"},(0,t.__)("First Name","wicket-memberships")),(0,e.createElement)("th",{scope:"col",className:"manage-column column-author"},(0,t.__)("Last Name","wicket-memberships"))),"organization"===a&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("th",{scope:"col",className:"manage-column column-author"},(0,t.__)("Contact","wicket-memberships"))),(0,e.createElement)("th",{scope:"col",className:"manage-column"},"individual"===a?(0,t.__)("Email","wicket-memberships"):(0,t.__)("Contact Email","wicket-memberships")),(0,e.createElement)("th",{scope:"col",className:"manage-column"},(0,t.__)("Status","wicket-memberships")),(0,e.createElement)("th",{scope:"col",className:"manage-column"},(0,t.__)("Tier(s)","wicket-memberships")),(0,e.createElement)("th",{scope:"col",className:"manage-column"},(0,t.__)("Link to MDP","wicket-memberships")))),(0,e.createElement)("tbody",null,n&&(0,e.createElement)("tr",{className:"alternate"},(0,e.createElement)("td",{className:"column-columnname",colSpan:"organization"===a?6:4},(0,e.createElement)(s.Spinner,null))),!n&&0===o.length&&(0,e.createElement)("tr",{className:"alternate"},(0,e.createElement)("td",{className:"column-columnname",colSpan:4},(0,t.__)("No members found.","wicket-memberships"))),!n&&o.length>0&&o.map(((n,m)=>(0,e.createElement)("tr",{key:m},"organization"===a&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("td",null,(0,e.createElement)("strong",null,(0,e.createElement)("a",{href:(0,l.addQueryArgs)(r,{id:n.meta.org_uuid}),className:"row-title"},n.meta.org_name)),(0,e.createElement)("div",{className:"row-actions"},(0,e.createElement)("span",{className:"edit"},(0,e.createElement)("a",{href:(0,l.addQueryArgs)(r,{id:n.meta.org_uuid}),"aria-label":(0,t.__)("Edit","wicket-memberships")},(0,t.__)("Edit","wicket-memberships"))))),(0,e.createElement)("td",null,n.meta.org_location)),"individual"===a&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("td",null,(0,e.createElement)("strong",null,(0,e.createElement)("a",{href:(0,l.addQueryArgs)(r,{id:n.user.user_login}),className:"row-title"},n.user.first_name)),(0,e.createElement)("div",{className:"row-actions"},(0,e.createElement)("span",{className:"edit"},(0,e.createElement)("a",{href:(0,l.addQueryArgs)(r,{id:n.user.user_login}),"aria-label":(0,t.__)("Edit","wicket-memberships")},(0,t.__)("Edit","wicket-memberships"))))),(0,e.createElement)("td",null,n.user.last_name)),"organization"===a&&(0,e.createElement)("td",null,n.user.display_name),(0,e.createElement)("td",null,n.user.user_email),(0,e.createElement)("td",null,(0,e.createElement)("span",{style:{color:"active"===n.meta.membership_status?"green":"",textTransform:"capitalize"}},n.meta.membership_status)),(0,e.createElement)("td",null,null===b&&(0,e.createElement)(s.Spinner,null),null!==b&&(()=>{const a=["active","delayed","grace_period","pending"],r={active:(0,t.__)("Active","wicket-memberships"),delayed:(0,t.__)("Delayed","wicket-memberships"),grace_period:(0,t.__)("Grace Period","wicket-memberships"),pending:(0,t.__)("Pending","wicket-memberships")},l=(n.user.all_membership_tiers||[{uuid:n.meta.membership_tier_uuid,status:n.meta.membership_status}]).filter((e=>a.includes(e.status)));return 0===l.length?(0,e.createElement)("span",null,(0,t.__)("Inactive","wicket-memberships")):l.map(((t,a)=>{const l=x(t.uuid),s=l?l.name:t.uuid,n=r[t.status]||t.status;return(0,e.createElement)("span",{key:a},a>0&&", ",s," (",n,")")}))})()),(0,e.createElement)("td",null,(0,e.createElement)("a",{target:"_blank",href:n.user.mdp_link},(0,t.__)("View","wicket-memberships")," ",(0,e.createElement)(s.Icon,{icon:"external"})))))))),(0,e.createElement)("div",{className:"tablenav bottom"},(0,e.createElement)("div",{className:"tablenav-pages"},(0,e.createElement)("span",{className:"displaying-num"},p," ",(0,t.__)("items","wicket-memberships")),_>1&&(0,e.createElement)("span",{className:"pagination-links"},(0,e.createElement)("button",{className:"prev-page button",disabled:1===v.page,onClick:()=>{const e={...v,page:v.page-1};f(e),y(e)}},"‹"),(0,e.createElement)("span",{className:"screen-reader-text"},(0,t.__)("Current Page","wicket-memberships")),(0,e.createElement)("span",{id:"table-paging",className:"paging-input"}," ",(0,e.createElement)("span",{className:"tablenav-paging-text"},v.page," ",(0,t.__)("of","wicket-memberships")," ",(0,e.createElement)("span",{className:"total-pages"},_))," "),(0,e.createElement)("button",{className:"next-page button",disabled:v.page===_,onClick:()=>{const e={...v,page:v.page+1};f(e),y(e)}},"›"))),(0,e.createElement)("br",{className:"clear"}))))}),{...c.dataset}))})()})();